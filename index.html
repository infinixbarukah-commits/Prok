<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WebTok Viral Scroll</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #000;
      color: #fff;
      font-family: sans-serif;
      overflow: hidden;
    }
    .video-container {
      position: relative;
      height: 100vh;
      width: 100vw;
      overflow-y: scroll;
      scroll-snap-type: y mandatory;
    }
    .video {
      position: relative;
      height: 100vh;
      width: 100%;
      scroll-snap-align: start;
    }
    video {
      height: 100%;
      width: 100%;
      object-fit: cover;
    }
    .controls {
      position: absolute;
      right: 10px;
      bottom: 20%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }
    .btn {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      font-size: 24px;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      cursor: pointer;
    }
    .btn:hover { background: rgba(255, 255, 255, 0.3); }
  </style>
</head>
<body>
  <div class="video-container" id="videoContainer"></div>

  <script>
    const container = document.getElementById('videoContainer');

    // Pexels API publik (bebas CORS)
    const pexelsURL = "https://api.pexels.com/videos/popular?per_page=10";
    const apiKey = "563492ad6f91700001000001a1f6b6b8bb244d7c86b1b76da4a5c73f"; // API publik gratis

    async function getVideos() {
      try {
        const res = await fetch(pexelsURL, {
          headers: { Authorization: apiKey }
        });
        const data = await res.json();
        if (data && data.videos) {
          data.videos.forEach(v => {
            const videoUrl = v.video_files.find(f => f.quality === "hd" && f.link.includes("https")).link;
            createVideoItem(videoUrl, v.user.name);
          });
        } else {
          console.error("Data tidak ditemukan:", data);
        }
      } catch (err) {
        console.error("Gagal ambil data:", err);
      }
    }

    function createVideoItem(url, title) {
      const videoDiv = document.createElement('div');
      videoDiv.className = 'video';

      const video = document.createElement('video');
      video.src = url;
      video.controls = false;
      video.loop = true;
      video.autoplay = false;
      video.muted = false;
      video.playsInline = true;

      const controls = document.createElement('div');
      controls.className = 'controls';

      const likeBtn = document.createElement('button');
      likeBtn.className = 'btn';
      likeBtn.textContent = '❤️';

      const downloadBtn = document.createElement('button');
      downloadBtn.className = 'btn';
      downloadBtn.textContent = '⬇️';
      downloadBtn.onclick = () => window.open(url, '_blank');

      controls.appendChild(likeBtn);
      controls.appendChild(downloadBtn);

      videoDiv.appendChild(video);
      videoDiv.appendChild(controls);
      container.appendChild(videoDiv);
    }

    // Scroll observer buat auto play
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const vid = entry.target.querySelector('video');
        if (entry.isIntersecting) {
          vid.play().catch(() => {});
        } else {
          vid.pause();
        }
      });
    }, { threshold: 0.75 });

    async function init() {
      await getVideos();
      document.querySelectorAll('.video').forEach(v => observer.observe(v));
    }

    init();
  </script>
</body>
</html>